<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wiki Manager</title>
</head>
<body>
  <script>
    (function() {
      const originalOpen = window.open;
      
      window.open = function(url, name, specs) {
        // 1. Log everything so we can see what's happening in F12 Console
        console.log("[Auto-Patcher] Intercepted window.open call");
        
        if (typeof url === "string" && url.indexOf("github.com/login/oauth") !== -1) {
            console.log("[Auto-Patcher] Found GitHub Login URL:", url);
            
            // 2. Use Regex to replace scope=repo OR scope%3Drepo (encoded version)
            // This catches it even if the browser encoded the symbols
            if (/scope(=|%3D)repo/.test(url)) {
                url = url.replace(/scope(=|%3D)repo/g, "scope$1public_repo");
                console.log("[Auto-Patcher] SUCCESS: Rewrote URL to:", url);
            } else {
                console.log("[Auto-Patcher] Warning: 'scope=repo' not found in URL string.");
            }
        }
        
        return originalOpen.apply(window, arguments);
      };
    })();
  </script>
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
</body>
</html>
